#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "Checking commit message format..."

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

pattern='^\[(SCRUM-[0-9]+|86d[a-z0-9]{6})\] .+'

if ! echo "$commit_msg" | grep -Eq "$pattern"; then
  echo ""
  echo "❌ Wrong format: commit message must start with either [SCRUM-<number>] or [86d<6 alphanumeric chars>]."
  echo ""
  echo "✅ Correct format examples:"
  echo "   [SCRUM-123] Fix login bug"
  echo "   [86d1a2b3c] Update readme"
  echo ""
  exit 1
fi

echo "✅ Commit message format is valid."
